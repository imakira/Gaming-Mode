#!/system/bin/sh
# Do not remove credit if you're using a part of this mod to your module.
# WeAreRavenS
# Modified Gaming Mode Script from @HafizZiq
# by @WeAreRavenS
echo "GameMods Applied Excecuted on $(date +"%d-%m-%Y %r" )" >> /storage/emulated/0/mods.log
ravens=/sys/devices/system/cpu
cpu_governors=$ravens/cpu0/cpufreq/scaling_available_governors
cpu_freq=$ravens/cpu4/cpufreq/scaling_available_frequencies
cpu_freq0=$ravens/cpu0/cpufreq/scaling_available_frequencies
cpu_max=$ravens/cpu4/cpufreq/cpuinfo_max_freq
cpu_min=$ravens/cpu4/cpufreq/cpuinfo_min_freq
setmin0=`cat $ravens/cpu0/cpufreq/cpuinfo_min_freq`
setmin4=`cat $ravens/cpu4/cpufreq/cpuinfo_min_freq`
setmax0=`cat $ravens/cpu0/cpufreq/cpuinfo_max_freq`
setmax4=`cat $ravens/cpu4/cpufreq/cpuinfo_max_freq`
gpumx=/sys/class/kgsl/kgsl-3d0/num_pwrlevels
io_scheduler=/sys/block/mmcblk0/queue/scheduler
ext4blocks="/sys/fs/ext4/mmcblk0p*"
while true; do
 if [ $(top -n 1 -d 1 | head -n 12 | grep -o -e 'feralinteractive' -e 'takashi' -e 'netmarble' -e 'yoozoogames' -e 'riotgames' -e 'joymax' -e 'deadeffect' -e 'warface' -e 'com.my' -e 'pnixgames' -e '.gamedevltd' -e 'napoleongames' -e 'datealive' -e 'mobile' -e 'indra' -e 'efun' -e 'gamedevltd' -e 'tapenjoy' -e 'warface' -e 'skynet' -e 'ppsspp' -e 'ubisoft' -e 'camouflaj' -e 'zlongame' -e 'archosaur' -e 'sea' -e 'YoStarEN' -e 'roblox' -e 'com.pixel.gun3d' -e 'cputhrottlingtest' -e 'innersloth' -e 'damonplay' -e 'codm' -e 'legends' -e 'pearlabyss' -e 'activision' -e 'callofduty' -e 'com.wb.goog' -e 'nexon' -e 'ea.game' -e 'konami' -e 'bandainamco' -e 'netease' -e 'MAME' -e 'netmarble' -e 'GoogleCam' -e 'edengames' -e 'Supercell' -e 'camera' -e 'snapcam' -e 'tencent' -e 'moonton' -e 'sega' -e 'gravity' -e 'hutchgames' -e 'madfingergames' -e 'efun' -e 'miHoYo' -e 'squareenix' -e 'telltalegames' -e 'kakaogames' -e 'nekki' -e 'klab' -e 'telltalegames' -e 'linegames' -e 'naturalmotion' -e 'ggplay' -e 'emagroups' -e 'ganeragames' -e 'gameloft' -e 'supercell' -e 'netease' -e 'freefireth' -e 'garena' | head -n 1) ]; then
    	    echo "3" > /proc/sys/vm/drop_caches
            echo "1" > /sys/devices/system/cpu/cpu0/online
            echo "1" > /sys/devices/system/cpu/cpu4/online
            chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
            chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor 
            chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
            chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
            chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
            chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq
            if [ -e /sys/module/msm_performance/parameters/cpu_oc ]; then
                  echo Y > /sys/module/msm_performance/parameters/cpu_oc
            fi
            if grep 'schedutil' $cpu_governors; then
                echo "schedutil" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/schedutil/*
                echo "38000" > /sys/devices/system/cpu/cpu0/cpufreq/schedutil/down_rate_limit_us
                echo "1" > /sys/devices/system/cpu/cpu0/cpufreq/schedutil/iowait_boost_enable
                echo "400" > /sys/devices/system/cpu/cpu0/cpufreq/schedutil/up_rate_limit_us
                echo "schedutil" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/schedutil/*
                echo "36000" > /sys/devices/system/cpu/cpu4/cpufreq/schedutil/down_rate_limit_us
                echo "1" > /sys/devices/system/cpu/cpu4/cpufreq/schedutil/iowait_boost_enable
                echo "400" > /sys/devices/system/cpu/cpu4/cpufreq/schedutil/up_rate_limit_us
            elif grep 'interactive' $cpu_governors; then
                chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
                echo "interactive" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/interactive/*
                echo "198000" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/above_hispeed_delay
                echo "1" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/fast_ramp_down
                echo "1" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_migration_notif
                echo "72" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/go_hispeed_load
                echo "1536000" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/hispeed_freq
                echo "78000" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/max_freq_hysteresis
                echo "18000" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/min_sample_time
                echo "56 1401000:72 1747000:89 1843000:60" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads
                echo "20000" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_rate
                echo "-1" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_slack
                echo "interactive" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/interactive/*
                echo "198000" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/above_hispeed_delay
                echo "1" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/fast_ramp_down
                echo "1" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/use_migration_notif
                echo "72" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/go_hispeed_load
                echo "1958400" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/hispeed_freq
                echo "78000" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/max_freq_hysteresis
                echo "18000" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/min_sample_time
                echo "56 1401000:28 1747000:8 1958000:80" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/target_loads
                echo "20000" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/timer_rate
                echo "-1" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/timer_slack
            fi
            echo "$setmax0" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
            echo "$setmax0" > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq
            echo "$setmax4" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
            echo "$setmax4" > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq
            echo "0:$setmax0 1:$setmax0 2:$setmax0 3:$setmax0 4:$setmax4 5:$setmax4 6:$setmax4 7:$setmax4" > /sys/module/msm_performance/parameters/cpu_max_freq
            echo "1113600" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
            echo "1401600" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq
            echo "0:1113600 1:1113600 2:1113600 3:1113600 4:1401600 5:1401600 6:1401600 7:1401600" > /sys/module/msm_performance/parameters/cpu_min_freq
            echo "1113600" > /sys/devices/system/cpu/cpufreq/policy0/scaling_min_freq
            echo "1401600" > /sys/devices/system/cpu/cpufreq/policy4/scaling_min_freq
            for perf in $(ls /sys/class/devfreq); do
	            echo "performance" > /sys/class/devfreq/"$perf"/governor
            done
            for ext4block in $ext4blocks; do
              if [ -e "$ext4block/inode_readahead_blks" ]; then
                chmod 0644 $ext4block/inode_readahead_blks
                echo "64" > $ext4block/inode_readahead_blks
              fi
            done
            if grep 'deadline' $io_scheduler; then
                echo "deadline" > /sys/block/mmcblk0/queue/scheduler
                echo "deadline" > /sys/block/mmcblk1/queue/scheduler
            else
                echo "cfq" > /sys/block/mmcblk0/queue/scheduler
                echo "cfq" > /sys/block/mmcblk1/queue/scheduler
            fi
            chmod 0644 /sys/block/mmcblk0/queue/iostats
            chmod 0644 /sys/block/mmcblk1/queue/iostats
            for file in /sys/block/*; do
                echo "512" > $file/queue/read_ahead_kb
                echo "2" > $file/queue/nomerges
                echo "2" > $file/queue/rq_affinity
                echo "0" > $file/queue/iostats
                echo "0" > $file/queue/add_random
                echo "0" > $file/queue/rotational
                echo "128" > $file/queue/nr_requests
                echo "512" > $file/bdi/read_ahead_kb
            done
            echo "5" > /sys/class/kgsl/kgsl-3d0/devfreq/polling_interval
            if [ -e /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost ]; then
                echo "3" > /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost
            fi
            if grep '4' $gpumx; then
                echo "1" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            elif grep '5' $gpumx; then
                echo "2" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            elif grep '6' $gpumx; then
                echo "3" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            elif grep '7' $gpumx; then
                echo "4" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            elif grep '8' $gpumx; then
                echo "5" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            elif grep '9' $gpumx; then
                echo "6" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            fi
            echo "0" > /sys/class/kgsl/kgsl-3d0/throttling
            echo "1" > /sys/class/kgsl/kgsl-3d0/force_clk_on
            echo "1" > /sys/class/kgsl/kgsl-3d0/force_bus_on
            echo "1" > /sys/class/kgsl/kgsl-3d0/force_rail_on
            echo "1" > /sys/class/kgsl/kgsl-3d0/force_no_nap
            if [ -d /sys/module/adreno_idler/parameters ]; then
                echo "20" > /sys/module/adreno_idler/parameters/adreno_idler_downdifferential
                echo "99" > /sys/module/adreno_idler/parameters/adreno_idler_idlewait
                echo "5" > /sys/module/adreno_idler/parameters/adreno_idler_idleworkload
                echo "N" > /sys/module/adreno_idler/parameters/adreno_idler_active
            fi
            if [ -d /sys/module/dsboost/parameters ]; then
                echo "256" > /sys/module/dsboost/parameters/input_boost_duration
                echo "50" > /sys/module/dsboost/parameters/input_stune_boost
                echo "50" > /sys/module/dsboost/parameters/sched_stune_boost
                echo "256" > /sys/module/dsboost/parameters/cooldown_boost_duration
                echo "10" > /sys/module/dsboost/parameters/cooldown_stune_boost
            fi
            if [ -d /sys/module/cpu_boost/parameters ]; then
                echo "256" > /sys/module/cpu_boost/parameters/input_boost_ms
                echo "256" > /sys/module/cpu_boost/parameters/input_boost_ms_s2
                echo "50" > /sys/module/cpu_boost/parameters/dynamic_stune_boost
            fi
            if [ -d /sys/module/cpu_input_boost/parameters ]; then
                echo "1804800" > /sys/module/cpu_input_boost/parameters/input_boost_freq_hp
                echo "1536000" > /sys/module/cpu_input_boost/parameters/input_boost_freq_lp
                echo "50" > /sys/module/cpu_input_boost/parameters/dynamic_stune_boost
                echo "256" > /sys/module/cpu_input_boost/parameters/input_boost_duration
                echo "50" > /sys/module/cpu_input_boost/parameters/general_stune_boost
            fi
            if [ -e /sys/module/msm_performance/parameters/touchboost ]; then
                echo "1" > /sys/module/msm_performance/parameters/touchboost
            fi
            if [ -e /sys/power/pnpmgr/touch_boost ]; then
                echo "1" > /sys/power/pnpmgr/touch_boost
            fi
            if [ -d /dev/stune ]; then
                echo "10" > /dev/stune/schedtune.boost
                echo "10" > /dev/stune/top-app/schedtune.boost
                echo "15" > /dev/stune/top-app/schedtune.sched_boost
                echo "0" > /dev/stune/top-app/schedtune.prefer_idle
            fi
            echo "1024" > /proc/sys/kernel/random/read_wakeup_threshold
            echo "2048" > /proc/sys/kernel/random/write_wakeup_threshold
            if [ -e /sys/module/msm_thermal/core_control/enabled ]; then
                echo "0" > /sys/module/msm_thermal/core_control/enabled
            fi
            if [ -e /sys/module/sync/parameters/fsync_enabled ]; then
                echo "N" > /sys/module/sync/parameters/fsync_enabled
            fi
            if [ -d /proc/sys/fs ]; then
                echo "5" > /proc/sys/fs/lease-break-time
            fi
            if [ -e /sys/kernel/dyn_fsync/Dyn_fsync_active ]; then
                echo "1" > /sys/kernel/dyn_fsync/Dyn_fsync_active
            fi
            if [ -e /sys/module/mmc_core/parameters/use_spi_crc ]; then
                echo '0' > /sys/module/mmc_core/parameters/use_spi_crc
            fi
            if [ -d /proc/sys/kernel ]; then
                echo "1" > /proc/sys/kernel/sched_boost
                echo "0" > /proc/sys/kernel/sched_child_runs_first
                echo "0" > /proc/sys/kernel/timer_migration
            fi
            if [ -e /sys/module/workqueue/parameters/power_efficient ]; then
                echo "0" > /sys/module/workqueue/parameters/power_efficient
            fi
            if [ -e /sys/devices/system/cpu/sched_mc_power_savings ]; then
                echo "0" > /sys/devices/system/cpu/sched_mc_power_savings
            fi
            if [ -d /sys/module/lowmemorykiller/parameters ]; then
                chmod 0644 sys/module/lowmemorykiller/parameters/*
                echo "1" > /sys/module/lowmemorykiller/parameters/enable_lmk
                echo "0,100,200,300,800,906" > /sys/module/lowmemorykiller/parameters/adj
                echo "28677,38236,47795,105149,143385,152944" > /sys/module/lowmemorykiller/parameters/minfree
                echo "1" > /sys/module/lowmemorykiller/parameters/enable_adaptive_lmk
                echo "1" > /sys/module/lowmemorykiller/parameters/lmk_fast_run
            fi
            echo "0-7" > /dev/cpuset/camera-daemon/cpus
            echo "0-2" > /dev/cpuset/restricted/cpus
            echo "0-3" > /dev/cpuset/system-background/cpus
            echo "0-2" > /dev/cpuset/audio-app/cpus
            echo "0-7" > /dev/cpuset/foreground/cpus
            echo "0-3" > /dev/cpuset/background/cpus
            echo "0-7" > /dev/cpuset/top-app/cpus
            resetprop ro.sys.fw.bg_apps_limit 20
            resetprop ro.vendor.qti.sys.fw.bg_apps_limit 20
            resetprop ro.vendor.qti.sys.fw.bservice_limit 20
    	    echo "1" > /proc/sys/vm/drop_caches
 else

            echo "1" > /sys/devices/system/cpu/cpu0/online
            echo "1" > /sys/devices/system/cpu/cpu4/online
            chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
            chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
            chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
            chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
            chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
            chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq
            if [ -e /sys/module/msm_performance/parameters/cpu_oc ]; then
                  echo Y > /sys/module/msm_performance/parameters/cpu_oc
            fi
            if grep 'blu_schedutil' $cpu_governors; then
                echo "blu_schedutil" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/blu_schedutil/*
                echo "1000" > /sys/devices/system/cpu/cpu0/cpufreq/blu_schedutil/down_rate_limit_us
                echo "20000" > /sys/devices/system/cpu/cpu0/cpufreq/blu_schedutil/up_rate_limit_us
                echo "0" > /sys/devices/system/cpu/cpu0/cpufreq/blu_schedutil/iowait_boost_enable
                echo "blu_schedutil" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/blu_schedutil/*
                echo "1000" > /sys/devices/system/cpu/cpu4/cpufreq/blu_schedutil/down_rate_limit_us
                echo "20000" > /sys/devices/system/cpu/cpu4/cpufreq/blu_schedutil/up_rate_limit_us
                echo "0" > /sys/devices/system/cpu/cpu4/cpufreq/blu_schedutil/iowait_boost_enable
            elif grep 'pwrutilx' $cpu_governors; then
                echo "pwrutilx" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/pwrutilx/*
                echo "700" > /sys/devices/system/cpu/cpu0/cpufreq/pwrutilx/down_rate_limit_us
                echo "1500" > /sys/devices/system/cpu/cpu0/cpufreq/pwrutilx/up_rate_limit_us
                echo "0" > /sys/devices/system/cpu/cpu0/cpufreq/pwrutilx/iowait_boost_enable
                echo "pwrutilx" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/pwrutilx/*
                echo "700" > /sys/devices/system/cpu/cpu4/cpufreq/pwrutilx/down_rate_limit_us
                echo "1500" > /sys/devices/system/cpu/cpu4/cpufreq/pwrutilx/up_rate_limit_us
                echo "0" > /sys/devices/system/cpu/cpu4/cpufreq/pwrutilx/iowait_boost_enable
            elif grep 'interactive' $cpu_governors; then
                chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
                echo "interactive" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/interactive/*
                echo "198000 1401000:158000 1536000:138000 1747000:178000" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/above_hispeed_delay
                echo "1" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/fast_ramp_down
                echo "1" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_migration_notif
                echo "88" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/go_hispeed_load
                echo "1113000" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/hispeed_freq
                echo "198000" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/max_freq_hysteresis
                echo "38000" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/min_sample_time
                echo "76 902000:80 1113000:68 1401000:89 1536000:72 1747000:89 1843000:60" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads
                echo "20000" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_rate
                echo "1" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_slack
                echo "interactive" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/interactive/*
                echo "198000 1401000:38000 1536000:178000" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/above_hispeed_delay
                echo "1" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/fast_ramp_down
                echo "1" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/use_migration_notif
                echo "88" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/go_hispeed_load
                echo "1113000" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/hispeed_freq
                echo "198000" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/max_freq_hysteresis
                echo "38000" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/min_sample_time
                echo "93 1401000:97 1747000:56 1958000:99" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/target_loads
                echo "20000" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/timer_rate
                echo "1" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/timer_slack
            elif grep 'schedutil' $cpu_governors; then
                echo "schedutil" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu0/cpufreq/schedutil/*
                echo "700" > /sys/devices/system/cpu/cpu0/cpufreq/schedutil/down_rate_limit_us
                echo "20000" > /sys/devices/system/cpu/cpu0/cpufreq/schedutil/up_rate_limit_us
                echo "0" > /sys/devices/system/cpu/cpu0/cpufreq/schedutil/iowait_boost_enable
                echo "schedutil" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
                chmod 0644 /sys/devices/system/cpu/cpu4/cpufreq/schedutil/*
                echo "700" > /sys/devices/system/cpu/cpu4/cpufreq/schedutil/down_rate_limit_us
                echo "20000" > /sys/devices/system/cpu/cpu4/cpufreq/schedutil/up_rate_limit_us
                echo "0" > /sys/devices/system/cpu/cpu4/cpufreq/schedutil/iowait_boost_enable
            fi
            if grep '1804800' $cpu_max; then
                echo "1401600" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
                echo "1401600" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
                echo "0:1401600 1:1401600 2:1401600 3:1401600 4:1401600 5:1401600 6:1401600 7:1401600" > /sys/module/msm_performance/parameters/cpu_max_freq
                  echo "1401600" > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq
                  echo "1401600" > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq
            elif grep '1958400' $cpu_freq; then
                  echo "1401600" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
                  echo "1401600" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
                  echo "0:1401600 1:1401600 2:1401600 3:1401600 4:1401600 5:1401600 6:1401600 7:1401600" > /sys/module/msm_performance/parameters/cpu_max_freq
                  echo "1401600" > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq
                  echo "1401600" > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq
            elif grep '1958400' $cpu_max; then
                  echo "1401600" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
                  echo "1401600" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
                  echo "0:1401600 1:1401600 2:1401600 3:1401600 4:1401600 5:1401600 6:1401600 7:1401600" > /sys/module/msm_performance/parameters/cpu_max_freq
                  echo "1401600" > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq
                  echo "1401600" > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq
            else
                  echo "1612800" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
                  echo "1747200" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
                  echo "0:1612800 1:1612800 2:1612800 3:1612800 4:1747200 5:1747200 6:1747200 7:1747200" > /sys/module/msm_performance/parameters/cpu_max_freq
                  echo "1612800" > /sys/devices/system/cpu/cpufreq/policy0/scaling_max_freq
                  echo "1747200" > /sys/devices/system/cpu/cpufreq/policy4/scaling_max_freq
            fi
            echo "$setmin0" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
            echo "$setmin0" > /sys/devices/system/cpu/cpufreq/policy0/scaling_min_freq
            echo "$setmin4" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq
            echo "$setmin4" > /sys/devices/system/cpu/cpufreq/policy4/scaling_min_freq
            echo "0:$setmin0 1:$setmin0 2:$setmin0 3:$setmin0 4:$setmin4 5:$setmin4 6:$setmin4 7:$setmin4" > /sys/module/msm_performance/parameters/cpu_min_freq
            for perf in $(ls /sys/class/devfreq); do
	            echo "simple_ondemand" > /sys/class/devfreq/"$perf"/governor
            done
            for ext4block in $ext4blocks; do
              if [ -e "$ext4block/inode_readahead_blks" ]; then
                chmod 0644 $ext4block/inode_readahead_blks
                echo "32" > $ext4block/inode_readahead_blks
              fi
            done
            if grep 'anxiety' $io_scheduler; then
                echo "anxiety" > /sys/block/mmcblk0/queue/scheduler
                echo "anxiety" > /sys/block/mmcblk1/queue/scheduler
            else
                echo "cfq" > /sys/block/mmcblk0/queue/scheduler
                echo "cfq" > /sys/block/mmcblk1/queue/scheduler
            fi
            chmod 0644 /sys/block/mmcblk0/queue/iostats
            chmod 0644 /sys/block/mmcblk1/queue/iostats
            for file in /sys/block/*; do
                echo "128" > $file/queue/read_ahead_kb
                echo "0" > $file/queue/nomerges
                echo "0" > $file/queue/rq_affinity
                echo "0" > $file/queue/iostats
                echo "0" > $file/queue/add_random
                echo "0" > $file/queue/rotational
                echo "128" > $file/queue/nr_requests
                echo "128" > $file/bdi/read_ahead_kb
            done
            echo "10" > /sys/class/kgsl/kgsl-3d0/devfreq/polling_interval
            echo "msm-adreno-tz" > /sys/class/kgsl/kgsl-3d0/devfreq/governor
            if [ -e /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost ]; then
                echo "0" > /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost
            fi
            if grep '4' $gpumx; then
                echo "3" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            elif grep '5' $gpumx; then
                echo "4" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            elif grep '6' $gpumx; then
                echo "5" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            elif grep '7' $gpumx; then
                echo "6" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            elif grep '8' $gpumx; then
                echo "7" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            elif grep '9' $gpumx; then
                echo "8" > /sys/class/kgsl/kgsl-3d0/min_pwrlevel
            fi
            echo "1" > /sys/class/kgsl/kgsl-3d0/throttling
            echo "0" > /sys/class/kgsl/kgsl-3d0/force_clk_on
            echo "0" > /sys/class/kgsl/kgsl-3d0/force_bus_on
            echo "0" > /sys/class/kgsl/kgsl-3d0/force_rail_on
            echo "0" > /sys/class/kgsl/kgsl-3d0/force_no_nap
            if [ -d /sys/module/adreno_idler/parameters ]; then
                echo "Y" > /sys/module/adreno_idler/parameters/adreno_idler_active
                echo "35" > /sys/module/adreno_idler/parameters/adreno_idler_downdifferential
                echo "10" > /sys/module/adreno_idler/parameters/adreno_idler_idlewait
                echo "10000" > /sys/module/adreno_idler/parameters/adreno_idler_idleworkload
            fi
            if [ -d /sys/module/dsboost/parameters ]; then
                echo "0" > /sys/module/dsboost/parameters/input_boost_duration
                echo "0" > /sys/module/dsboost/parameters/input_stune_boost
                echo "0" > /sys/module/dsboost/parameters/sched_stune_boost
                echo "0" > /sys/module/dsboost/parameters/cooldown_boost_duration
                echo "0" > /sys/module/dsboost/parameters/cooldown_stune_boost
            fi
            if [ -d /sys/module/cpu_boost/parameters ]; then
                echo "0" > /sys/module/cpu_boost/parameters/input_boost_ms
                echo "0" > /sys/module/cpu_boost/parameters/input_boost_ms_s2
                echo "0" > /sys/module/cpu_boost/parameters/dynamic_stune_boost
            fi
            if [ -d /sys/module/cpu_input_boost/parameters ]; then
                echo "1113600" > /sys/module/cpu_input_boost/parameters/input_boost_freq_hp
                echo "1113600" > /sys/module/cpu_input_boost/parameters/input_boost_freq_lp
                echo "0" > /sys/module/cpu_input_boost/parameters/dynamic_stune_boost
                echo "0" > /sys/module/cpu_input_boost/parameters/input_boost_duration
                echo "0" > /sys/module/cpu_input_boost/parameters/general_stune_boost
            fi
            if [ -e /sys/module/msm_performance/parameters/touchboost ]; then
                echo "0" > /sys/module/msm_performance/parameters/touchboost
            fi
            if [ -e /sys/power/pnpmgr/touch_boost ]; then
                echo "0" > /sys/power/pnpmgr/touch_boost
            fi
            if [ -d /dev/stune ]; then
                echo "0" > /dev/stune/schedtune.boost
                echo "5" > /dev/stune/top-app/schedtune.boost
                echo "5" > /dev/stune/top-app/schedtune.sched_boost
                echo "1" > /dev/stune/top-app/schedtune.prefer_idle
            fi
            echo "64" > /proc/sys/kernel/random/read_wakeup_threshold
            echo "128" > /proc/sys/kernel/random/write_wakeup_threshold
            if [ -e /sys/module/msm_thermal/core_control/enabled ]; then
                echo "1" > /sys/module/msm_thermal/core_control/enabled
            fi
            if [ -e /sys/module/sync/parameters/fsync_enabled ]; then
                echo "Y" > /sys/module/sync/parameters/fsync_enabled
            fi
            if [ -d /proc/sys/fs ]; then
                echo "25" > /proc/sys/fs/lease-break-time
            fi
            if [ -e /sys/kernel/dyn_fsync/Dyn_fsync_active ]; then
                echo "0" > /sys/kernel/dyn_fsync/Dyn_fsync_active
            fi
            if [ -e /sys/module/mmc_core/parameters/use_spi_crc ]; then
                echo "0" > echo '1' > /sys/module/mmc_core/parameters/use_spi_crc
            fi
            if [ -d /proc/sys/kernel ]; then
                echo "0" > /proc/sys/kernel/sched_boost
                echo "1" > /proc/sys/kernel/sched_child_runs_first
                echo "1" > /proc/sys/kernel/timer_migration
            fi
            if [ -e /sys/module/workqueue/parameters/power_efficient ]; then
                echo "1" > /sys/module/workqueue/parameters/power_efficient
            fi
            if [ -e /sys/devices/system/cpu/sched_mc_power_savings ]; then
                echo "2" > /sys/devices/system/cpu/sched_mc_power_savings
            fi
            if [ -d /sys/module/lowmemorykiller/parameters ]; then
                chmod 0644 sys/module/lowmemorykiller/parameters/*
                echo "0" > /sys/module/lowmemorykiller/parameters/enable_lmk
                echo "0,258,417,676,824,1000" > /sys/module/lowmemorykiller/parameters/adj
                echo "6999,13998,20997,27996,34955,41994" > /sys/module/lowmemorykiller/parameters/minfree
                echo "0" > /sys/module/lowmemorykiller/parameters/enable_adaptive_lmk
                echo "0" > /sys/module/lowmemorykiller/parameters/lmk_fast_run
            fi
            echo "0-3" > /dev/cpuset/camera-daemon/cpus
            echo "0-2" > /dev/cpuset/restricted/cpus
            echo "0-2" > /dev/cpuset/system-background/cpus
            echo "0-1" > /dev/cpuset/audio-app/cpus
            echo "0-3" > /dev/cpuset/foreground/cpus
            echo "0" > /dev/cpuset/background/cpus
            echo "0-3,6-7" > /dev/cpuset/top-app/cpus
            resetprop ro.sys.fw.bg_apps_limit 160
            resetprop ro.vendor.qti.sys.fw.bg_apps_limit 160
            resetprop ro.vendor.qti.sys.fw.bservice_limit 160
 fi;
done
